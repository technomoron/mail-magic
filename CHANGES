# Workspace Notes

Mail Magic is a monorepo. Release notes are tracked per package:

- `packages/mail-magic/CHANGES`
- `packages/mail-magic-client/CHANGES`

This file captures workspace-level changes (tooling, repo layout, etc) and is not used for npm releases.

## 2026-02-07

- Documented new optional environment knobs in `.env-dist`, including
  `API_BASE_PATH`, `ASSET_PUBLIC_BASE`, `ADMIN_ENABLED`, and `ADMIN_APP_PATH`.
- Fixed asset caching headers by passing `maxAge` to Express `sendFile()`, and
  mounted the public asset handler under both `/asset/...` and `/api/asset/...`
  (when `API_BASE_PATH` is in use) to preserve existing expectations.
- Upgraded `@technomoron/api-server-base` to `2.0.0-beta.18` and adjusted
  `/api/...` custom route mounting to stay reachable with the new API 404
  handling.

## 2026-02-02

- Added a pnpm-aware workspace wrapper with npm fallback so root and package
  builds run under either package manager.
- Centralized pnpm build-script allowlist at the workspace root and documented
  pnpm-first development with npm for CI/publishing.
- Added a workspace-wide pnpm definition and type stubs to keep optional admin
  integration building without a hard dependency.
