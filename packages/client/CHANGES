CHANGES
=======

Unreleased (2026-02-22)

- chore(changes): normalize this package changelog to required CHANGES format.
- (Changes generated/assisted by Codex (profile: GPT-5/default).)

Version 1.0.31 (2026-02-19)

- Extract CLI implementation to dedicated `@technomoron/mail-magic-cli`
  package; remove CLI build/bin and CLI-only dependencies from this package.
- Replace `forEach` with `for...of` and use separate `const` declarations in
  `validateEmails` for consistency with server-side style.

Version 1.0.30 (2026-02-17)

- Refactor template preprocess compilation to use per-invocation configuration
  (remove module-level mutable config state).
- Add regression coverage to ensure preprocess options (such as
  `inline_includes`) do not leak between compile calls.

Version 1.0.29 (2026-02-11)

- Expand client coverage for mail-magic-owned endpoints:
  - Add `storeFormRecipient()` for `POST /api/v1/form/recipient`.
  - Add `getSwaggerSpec()` for `GET /api/swagger`.
  - Add `fetchPublicAsset()` for public asset routes (`/asset/...` and `/api/asset/...`).
- Extend `storeFormTemplate()` input support for newer form fields:
  `replyto_email`, `replyto_from_fields`, `allowed_fields`, and `captcha_required`.
- Add tests for the new client methods and route mappings.
- Refresh README usage docs for recipient upserts, swagger retrieval, and public asset fetch helpers.

Version 1.0.28 (2026-02-08)

- Refresh README/examples to match current server auth and public form submission semantics (`_mm_form_key`,
  `_mm_locale`, `_mm_recipients`).
- Update `sendFormMessage()` to require `_mm_form_key` and default attachment multipart fields to `_mm_fileN`.

Version 1.0.27 (2026-02-07)

- Harden the template compiler to prevent `{% include %}` paths from escaping the
  configured template root directory.

Version 1.0.26 (2026-02-07)

- Fix `GET` requests to omit request bodies and only set `Content-Type` when
  sending JSON payloads.
- `mm-cli version` now reports the package version instead of a hardcoded string.

Version 1.0.25 (2026-02-07)

- `sendFormMessage()` now requires `domain` when sending by `formid`, and also
  supports sending by `form_key`.

Version 1.0.23 (2026-01-31)

- Fixed the per-package release script name and tag format used to trigger
  CI releases; no runtime changes.
